app = { env : '<%= env %>' }

<% named_routes.each do |r| %>
# name: <%= r.name %>
# conditions: <%= r.conditions %>
# defaults: <%= r.defaults %>
# path: <%= r.path %>
# requirements: <%= r.requirements %>
# verb: <%= r.verb %>
# segment_keys: <%= r.segment_keys %>

<% if r.segment_keys.empty? %>

app.<%= r.name %>_path = -> "<%= r.path %>"

<% else %>

app.<%= r.name %>_path = ( <%= r.segment_keys.join ', ' %>='json' ) ->
  "<%= r.path.delete( '()' ).gsub /:(\w+)/, '#{\1}' %>"

<% end %>

<% end %>

window.<%= application_name %> = app
